<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cassa 2026</title>
<link rel="stylesheet" href="style.css">
<style>
:root{
  --bg:#f5f5f5; --text:#222; --card:#fff;
}
body.dark{--bg:#121212;--text:#eee;--card:#1e1e1e;}
body{margin:0;font-family:sans-serif;background:var(--bg);color:var(--text);}
header{display:flex;justify-content:space-between;align-items:center;padding:12px;background:var(--card);box-shadow:0 2px 6px rgba(0,0,0,.1);}
.card{background:var(--card);margin:12px;padding:12px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.05);}
.section{padding-bottom:60px;}
nav button{flex:1;background:none;border:none;padding:12px;font-size:16px;color:var(--text);}
input,button,select{margin:6px 0;padding:8px;width:100%;border-radius:6px;border:1px solid #ccc;}
canvas{width:100% !important;height:200px !important;}
.kpi{display:flex;justify-content:space-around;text-align:center;}
#lista div{padding:6px;border-bottom:1px solid #ddd;display:flex;justify-content:space-between;}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen">
  <div class="card">
    <h2>ğŸ”’ Login</h2>
    <input type="text" id="username" placeholder="Nome utente">
    <input type="email" id="userEmail" placeholder="Email">
    <input type="password" id="accessCode" placeholder="Codice di accesso">
    <button onclick="checkAccess()">Accedi</button>
    <p style="font-size:12px;">Inserisci AUTOOF per resettare dati</p>
  </div>
</div>

<!-- APP -->
<div id="app" style="display:none;">
  <header>
    <h1>ğŸ’¼ Cassa 2026</h1>
    <button id="darkToggle">ğŸŒ™</button>
  </header>

  <!-- Home -->
  <div id="homeSection" class="section">
    <div class="card kpi">
      <div>Saldo<br><span id="saldoTot" class="saldo">â‚¬0</span><button id="toggleSaldo">ğŸ‘ï¸</button></div>
      <div>Ingressi<br><span id="totIn" class="ingresso">â‚¬0</span></div>
      <div>Spese<br><span id="totSp" class="spesa">â‚¬0</span></div>
    </div>
    <div class="card">
      <h3>ğŸ“ˆ Dashboard</h3>
      <canvas id="grafico"></canvas>
    </div>
  </div>

  <!-- Movimenti -->
  <div id="movimentiSection" class="section" style="display:none;">
    <div class="card">
      <h3>â• Movimento</h3>
      <input type="text" id="descMov" placeholder="Descrizione">
      <input type="number" id="importoMov" placeholder="Importo (â‚¬)">
      <select id="tipoMov">
        <option value="ingresso">Ingresso</option>
        <option value="spesa">Spesa</option>
      </select>
      <button onclick="aggiungiMovimento()">Aggiungi</button>
    </div>

    <div class="card">
      <h3>ğŸ“‹ Lista Movimenti</h3>
      
      <div>
        <label>Filtro Data:</label>
        <select id="filtroData" onchange="gestisciPeriodoPicker()">
          <option value="anno">Tutto l'anno</option>
          <option value="mese">Mese corrente</option>
          <option value="periodo">Periodo personalizzato</option>
        </select>
      </div>
      <div id="periodoPicker" style="display:none;">
        <input type="date" id="dataInizio"> a 
        <input type="date" id="dataFine">
        <button onclick="applicaFiltri()">Applica</button>
      </div>

      <div>
        <label>Categoria:</label>
        <select id="filtroCategoria" onchange="applicaFiltri()">
          <option value="tutte">Tutte</option>
          <option value="ingresso">Ingressi</option>
          <option value="spesa">Spese</option>
        </select>
      </div>

      <div id="lista"></div>
    </div>
  </div>

  <!-- Obiettivi -->
  <div id="obiettiviSection" class="section" style="display:none;">
    <div class="card">
      <h3>ğŸ¯ Obiettivi</h3>
      <input type="number" id="obiettivoGuadagno" placeholder="Obiettivo Guadagno â‚¬">
      <input type="number" id="obiettivoSpesa" placeholder="Obiettivo Spesa â‚¬">
      <button onclick="salvaObiettivi()">Salva Obiettivi</button>
      <div id="statusObiettivi"></div>
    </div>
  </div>

  <!-- Impostazioni -->
  <div id="impostazioniSection" class="section" style="display:none;">
    <div class="card">
      <h3>âš™ï¸ Impostazioni</h3>
      <input type="text" id="profileName" placeholder="Nome utente">
      <input type="email" id="profileEmail" placeholder="Email">
      <input type="password" id="profileCode" placeholder="Codice di accesso">
      <button onclick="aggiornaProfilo()">Aggiorna Profilo</button>
      <button onclick="resetApp()">Reset App</button>
    </div>
  </div>

  <!-- Menu in basso -->
  <nav>
    <button onclick="apriSezione('home')">Home</button>
    <button onclick="apriSezione('movimenti')">Movimenti</button>
    <button onclick="apriSezione('obiettivi')">Obiettivi</button>
    <button onclick="apriSezione('impostazioni')">Impostazioni</button>
  </nav>
</div>

<script src="script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
