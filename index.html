<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cassa 2026 Pro</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen">
  <h2>Benvenuto in Cassa 2026</h2>
  <input type="text" id="pinInput" placeholder="Inserisci PIN">
  <button id="btnAccedi">Accedi</button>
  <p id="loginMsg" style="color:red;"></p>
</div>

<!-- APP -->
<div id="app" style="display:none;">

  <header>
    <h1>Cassa 2026 Pro</h1>
    <button id="toggleSaldo">üëÅÔ∏è Toggle Saldo</button>
  </header>

  <!-- HOME -->
  <section id="homeSection">
    <div class="card">
      <h2>Saldo Totale</h2>
      <p id="saldoTot" class="saldo">‚Ç¨0</p>
      <canvas id="grafico" width="400" height="150"></canvas>
    </div>
  </section>

  <!-- MOVIMENTI -->
  <section id="movimentiSection">
    <div class="card">
      <h2>Nuovo Movimento</h2>
      <input type="text" id="descMov" placeholder="Descrizione">
      <input type="number" id="importoMov" placeholder="Importo">
      <input type="date" id="dataMov">
      <select id="tipoMov">
        <option value="ingresso">Ingresso</option>
        <option value="spesa">Spesa</option>
      </select>
      <button onclick="aggiungiMovimento()">Aggiungi</button>

      <h3>Filtri</h3>
      <select id="filtroData" onchange="gestisciPeriodoPicker()">
        <option value="anno">Tutto l'anno</option>
        <option value="mese">Mese corrente</option>
        <option value="periodo">Da giorno X a giorno Y</option>
      </select>
      <div id="periodoPicker" style="display:none;">
        <input type="date" id="dataInizio">
        <input type="date" id="dataFine">
        <button onclick="applicaFiltri()">Applica</button>
      </div>
      <select id="filtroCategoria" onchange="applicaFiltri()">
        <option value="tutte">Tutte le categorie</option>
        <option value="ingresso">Ingresso</option>
        <option value="spesa">Spesa</option>
      </select>

      <div id="lista"></div>
    </div>
  </section>

  <!-- IMPOSTAZIONI -->
  <section id="impostazioniSection">
    <div class="card">
      <h2>Impostazioni</h2>
      <button id="darkToggle">üåô Dark Mode</button>

      <h3>Obiettivi</h3>
      <input type="number" id="obiettivoGuadagno" placeholder="Obiettivo Guadagno">
      <input type="number" id="obiettivoSpesa" placeholder="Obiettivo Spesa">
      <button onclick="salvaObiettivi()">Salva Obiettivi</button>
      <div id="statusObiettivi"></div>

      <h3>Gestione App</h3>
      <button onclick="resetApp()">Reset App (AUTOOF)</button>
    </div>
  </section>

  <nav>
    <button onclick="apriSezione('home')">Home</button>
    <button onclick="apriSezione('movimenti')">Movimenti</button>
    <button onclick="apriSezione('impostazioni')">Impostazioni</button>
  </nav>

</div>

<script src="script.js"></script>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('sw.js')
    .then(() => console.log('Service Worker registrato'))
    .catch(err => console.log(err));
}
</script>
</body>
</html>
